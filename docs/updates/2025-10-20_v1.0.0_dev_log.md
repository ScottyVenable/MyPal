# Dev Log — MyPal v1.0.0

Date: 2025-10-20
Tag: v1.0.0

## Overview
This release graduates MyPal from MVP to 1.0 with a desktop launcher, graph visualization of the “Brain,” optional authentication for sensitive actions, a telemetry opt-in, plugin scaffolding, and a tightened developer experience. The on-device model plan remains documented, with model directory + listing in place.

## Changes

### Launcher / Installers
- Electron launcher (dev/src/bin/launcher): starts backend in a child process, waits on `/api/health`, and loads the SPA UI.
- Packages extra resources from `app/` for distribution via electron-builder.
- Uses per-user data/ logs/ models directories under Electron’s `userData` path.

### Frontend
- Brain tab: renders a concept graph derived from recent chat log co-occurrences using vis-network (CDN). Added Refresh button.
- Settings: API Provider/Key, XP Multiplier, Telemetry (opt-in), Auth Required toggle.
- Health modal and Dev Panel (Ctrl+D) retained.

### Backend
- Health, logging, and telemetry:
  - `/api/health` logs a telemetry event when telemetry is enabled.
  - Appends request logs to `logs/access.log` and telemetry events to `logs/telemetry.log`.
  - `/api/telemetry` accepts client-side events (local append only).
- Brain API: `/api/brain` builds a small co-occurrence network (top 50 words, edges with weight ≥ 2).
- Models + Plugins scaffolding:
  - `/api/models` lists files in `MODELS_DIR` (created on startup); supports future on-device LLM loading.
  - Plugins: scans `app/backend/plugins/` and lists manifests; endpoint to enable/disable plugins (state in `data/plugins.json`).
- Auth & sessions (optional):
  - `/api/auth/register`, `/api/auth/login`, `/api/auth/logout` with bcryptjs password hashing, file-backed sessions (expiry).
  - When Settings → Auth Required is true, `/api/export` and `/api/reset` require a valid Bearer token.
- Settings extended: supports `telemetry` and `authRequired` flags in addition to existing API provider and multiplier.
- Environment overrides: respects `DATA_DIR`, `LOGS_DIR`, and `MODELS_DIR` (used by the launcher).

### CI/Build
- GitHub Actions builds a zipped artifact of backend+frontend. Electron builds run locally via launcher’s `dist` script.

### Documentation
- v1.0 roadmap and v0.1 TODOs are in dev/docs/updates.
- README and user docs cover quickstart, features, and legal drafts.

## Testing
Manual validation across key flows:
- Launcher: verified backend boots under Electron, health waits up, and window loads UI. Backend logs to Electron userData folders.
- Brain graph: chat a few topics, Refresh populates a small network; graph renders and is interactive.
- Auth: register → token issued; login issues token; with Auth Required on, export/reset require Bearer token; without, endpoints remain open.
- Telemetry: enabled flag appends events to telemetry.log; disabled returns 202 with disabled reason; health events append when enabled.
- Models listing: lists files under models dir; used for on-device LLM planning.
- Plugins: plugins list returns directories; toggling state flips enabled flag in `data/plugins.json`.
- Settings syncs to UI; XP multiplier and provider persist; masked key behavior intact.

## Upgrade Notes
- If running via Electron, data/logs/models move under Electron’s userData path; legacy data may be migrated manually if needed.
- First user to register becomes admin (role reserved for future features).

## Next Steps (Post-1.0)
- Implement the storage abstraction driver and migrate persistence behind it (JSON → SQLite → cloud drivers).
- Integrate on-device LLM adapter (llama.cpp/gguf) with streaming; fallbacks to selected provider.
- Expand Brain graph from co-occurrences to concept/fact nodes, association strength decay, and lobes.
- Flesh out plugin API (server hooks + frontend discovery) and add a plugin management UI.
